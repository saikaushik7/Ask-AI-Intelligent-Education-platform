{% extends "base.html" %}
{% block content %}
<div class="glass-card p-4 rounded shadow-lg">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-white">üìú Your Document History</h2>
    <a class="btn btn-outline-light btn-sm" href="{{ url_for('docs_bp.upload') }}">‚Üê Back to Upload</a>
  </div>

  {% if docs %}
  <div class="table-responsive">
    <table class="table table-dark table-striped table-bordered align-middle text-center rounded">
      <thead class="table-light">
        <tr>
          <th>Document Name</th>
          <th>Uploaded On</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for doc in docs %}
        <tr>
          <td>{{ doc.filename }}</td>
          <td>{{ doc.upload_date.strftime('%Y-%m-%d %H:%M') }}</td>
          <td>
            <a href="{{ url_for('docs_bp.summarize_specific', doc_id=doc.id) }}" class="btn btn-success btn-sm">Summary</a>
            <a href="{{ url_for('rag_bp.doubt_resolver_doc', doc_id=doc.id) }}" class="btn btn-secondary btn-sm">Doubt</a>
            <a href="{{ url_for('quiz_bp.quiz_start', doc_id=doc.id) }}" class="btn btn-warning btn-sm">Quiz</a>
            <a href="{{ url_for('docs_bp.delete_doc', doc_id=doc.id) }}"
               onclick="return confirm('Are you sure you want to delete this document?');"
               class="btn btn-danger btn-sm">Delete</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <p class="text-light text-center mt-5">No documents uploaded yet.</p>
  {% endif %}
</div>

<style>
.glass-card {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 15px;
  backdrop-filter: blur(10px);
  color: #fff;
  border: 1px solid rgba(255, 255, 255, 0.2);
}
.table-dark {
  background-color: rgba(0, 0, 0, 0.4);
}
</style>
{% endblock %}
